<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crystal Haven - Premium Healing Crystals</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --cream: #F5EDE4;
            --sage: #C8D5B9;
            --navy: #1a2332;
            --accent: #8FA37E;
            --white: #FFFFFF;
        }

        body {
            font-family: 'Georgia', serif;
            background-color: var(--cream);
            color: var(--navy);
            line-height: 1.6;
        }

        /* Header & Navigation */
        header {
            background: linear-gradient(135deg, var(--navy) 0%, #2a3d5a 100%);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        nav {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--cream);
            text-decoration: none;
            letter-spacing: 2px;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
            align-items: center;
        }

        .nav-links a {
            color: var(--cream);
            text-decoration: none;
            transition: color 0.3s;
            font-size: 1rem;
        }

        .nav-links a:hover {
            color: var(--sage);
        }

        .cart-icon {
            position: relative;
            cursor: pointer;
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--sage);
            color: var(--navy);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: bold;
        }

        .menu-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--cream);
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Hero Section */
        .hero {
            background: var(--cream);
            padding: 8rem 2rem;
            text-align: center;
            color: var(--navy);
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            color: var(--navy);
        }

        .hero p {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            color: var(--navy);
        }

        .cta-button {
            background: var(--sage);
            color: var(--navy);
            padding: 1rem 2.5rem;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            font-weight: bold;
        }

        .cta-button:hover {
            background: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        /* Product Section */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 4rem 2rem;
        }

        .section-title {
            text-align: center;
            font-size: 2.5rem;
            color: var(--navy);
            margin-bottom: 3rem;
            position: relative;
        }

        .section-title::after {
            content: '';
            display: block;
            width: 100px;
            height: 3px;
            background: var(--sage);
            margin: 1rem auto;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-bottom: 4rem;
        }

        .product-card {
            background: var(--white);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .product-image {
            width: 100%;
            height: 300px;
            background: linear-gradient(135deg, var(--sage) 0%, var(--accent) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            color: var(--cream);
        }

        .product-info {
            padding: 1.5rem;
        }

        .product-name {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            color: var(--navy);
        }

        .product-description {
            color: #666;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        .product-price {
            font-size: 1.5rem;
            color: var(--accent);
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .add-to-cart {
            width: 100%;
            background: var(--navy);
            color: var(--cream);
            border: none;
            padding: 0.8rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .add-to-cart:hover {
            background: var(--sage);
            color: var(--navy);
        }

        /* About Section */
        .about-section {
            background: var(--sage);
            padding: 4rem 2rem;
            text-align: center;
        }

        .about-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .about-section h2 {
            font-size: 2.5rem;
            color: var(--navy);
            margin-bottom: 1.5rem;
        }

        .about-section p {
            font-size: 1.1rem;
            color: var(--navy);
            line-height: 1.8;
        }

        /* Footer */
        footer {
            background: var(--navy);
            color: var(--cream);
            padding: 3rem 2rem;
            text-align: center;
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section h3 {
            color: var(--sage);
            margin-bottom: 1rem;
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section a {
            color: var(--cream);
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-section a:hover {
            color: var(--sage);
        }

        /* Cart Modal */
        .cart-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .cart-content {
            background: var(--cream);
            padding: 2rem;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .close-cart {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--navy);
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: var(--white);
            margin-bottom: 1rem;
            border-radius: 8px;
        }

        .cart-total {
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 2px solid var(--sage);
            font-size: 1.5rem;
            font-weight: bold;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .menu-toggle {
                display: block;
            }

            .nav-links {
                position: fixed;
                top: 70px;
                left: -100%;
                flex-direction: column;
                background: var(--navy);
                width: 100%;
                padding: 2rem;
                transition: left 0.3s;
            }

            .nav-links.active {
                left: 0;
            }

            .hero h1 {
                font-size: 2.5rem;
            }

            .hero p {
                font-size: 1.1rem;
            }

            .products-grid {
                grid-template-columns: 1fr;
            }

            .footer-content {
                grid-template-columns: 1fr;
            }
        }

        @media (min-width: 769px) and (max-width: 1024px) {
            .products-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <nav>
            <a href="#" class="logo">‚ú® Crystal Haven</a>
            <button class="menu-toggle" onclick="toggleMenu()">‚ò∞</button>
            <ul class="nav-links" id="navLinks">
                <li><a href="#home">Home</a></li>
                <li><a href="#products">Shop</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#contact">Contact</a></li>
                <li class="cart-icon" onclick="openCart()">
                    üõí
                    <span class="cart-count" id="cartCount">0</span>
                </li>
            </ul>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <h1>Discover Your Perfect Crystal</h1>
        <p>Handpicked healing crystals to bring balance, peace, and positive energy into your life</p>
        <a href="#products" class="cta-button">Explore Collection</a>
    </section>

    <!-- Products Section -->
    <section class="container" id="products">
        <h2 class="section-title">Featured Crystals</h2>
        <div class="products-grid" id="productsGrid">
            <!-- Products will be loaded here by JavaScript -->
        </div>
    </section>

    <!-- About Section -->
    <section class="about-section" id="about">
        <div class="about-content">
            <h2>About Crystal Haven</h2>
            <p>We are passionate about bringing the healing power of crystals to everyone. Each crystal in our collection is ethically sourced and carefully selected for its unique energy and beauty. Whether you're new to crystals or a seasoned collector, we're here to guide you on your spiritual journey.</p>
        </div>
    </section>

    <!-- Footer -->
    <footer id="contact">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="#home">Home</a></li>
                    <li><a href="#products">Shop</a></li>
                    <li><a href="#about">About Us</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Customer Care</h3>
                <ul>
                    <li><a href="#">Shipping Info</a></li>
                    <li><a href="#">Returns</a></li>
                    <li><a href="#">FAQ</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Connect With Us</h3>
                <ul>
                    <li><a href="#">Instagram</a></li>
                    <li><a href="#">Facebook</a></li>
                    <li><a href="#">Email Us</a></li>
                </ul>
            </div>
        </div>
        <p>&copy; 2024 Crystal Haven. All rights reserved.</p>
    </footer>

    <!-- Cart Modal -->
    <div class="cart-modal" id="cartModal">
        <div class="cart-content">
            <div class="cart-header">
                <h2>Your Cart</h2>
                <button class="close-cart" onclick="closeCart()">‚úï</button>
            </div>
            <div id="cartItems"></div>
            <div class="cart-total">
                Total: $<span id="cartTotal">0.00</span>
            </div>
            <button class="cta-button" style="width: 100%; margin-top: 1rem;" onclick="initiatePayment()">Proceed to Payment</button>
        </div>
    </div>

    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script>
        // Razorpay configuration - Replace with your actual keys
        const RAZORPAY_KEY = "YOUR_RAZORPAY_KEY_ID"; // Replace with your actual key
        
        const products = [
            { id: 1, name: "Amethyst", price: 24.99, description: "Calming & spiritual growth", icon: "üíú" },
            { id: 2, name: "Rose Quartz", price: 19.99, description: "Love & emotional healing", icon: "üíó" },
            { id: 3, name: "Clear Quartz", price: 22.99, description: "Amplification & clarity", icon: "ü§ç" },
            { id: 4, name: "Citrine", price: 27.99, description: "Abundance & positivity", icon: "üíõ" },
            { id: 5, name: "Black Tourmaline", price: 21.99, description: "Protection & grounding", icon: "üñ§" },
            { id: 6, name: "Selenite", price: 18.99, description: "Cleansing & peace", icon: "ü§ç" },
            { id: 7, name: "Labradorite", price: 29.99, description: "Transformation & magic", icon: "üíô" },
            { id: 8, name: "Green Aventurine", price: 20.99, description: "Luck & prosperity", icon: "üíö" }
        ];

        let cart = [];

        function loadProducts() {
            const grid = document.getElementById('productsGrid');
            grid.innerHTML = products.map(product => `
                <div class="product-card">
                    <div class="product-image">${product.icon}</div>
                    <div class="product-info">
                        <h3 class="product-name">${product.name}</h3>
                        <p class="product-description">${product.description}</p>
                        <p class="product-price">$${product.price}</p>
                        <button class="add-to-cart" onclick="addToCart(${product.id})">Add to Cart</button>
                    </div>
                </div>
            `).join('');
        }

        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            cart.push(product);
            updateCartCount();
            showNotification('Added to cart!');
        }

        function updateCartCount() {
            document.getElementById('cartCount').textContent = cart.length;
        }

        function openCart() {
            const modal = document.getElementById('cartModal');
            const cartItems = document.getElementById('cartItems');
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<p style="text-align: center; padding: 2rem;">Your cart is empty</p>';
            } else {
                cartItems.innerHTML = cart.map((item, index) => `
                    <div class="cart-item">
                        <div>
                            <strong>${item.name}</strong>
                            <p style="font-size: 0.9rem; color: #666;">$${item.price}</p>
                        </div>
                        <button onclick="removeFromCart(${index})" style="background: none; border: none; cursor: pointer; font-size: 1.2rem;">üóëÔ∏è</button>
                    </div>
                `).join('');
            }
            
            const total = cart.reduce((sum, item) => sum + item.price, 0);
            document.getElementById('cartTotal').textContent = total.toFixed(2);
            
            modal.style.display = 'flex';
        }

        function closeCart() {
            document.getElementById('cartModal').style.display = 'none';
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCartCount();
            openCart();
        }

        function toggleMenu() {
            document.getElementById('navLinks').classList.toggle('active');
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: var(--sage);
                color: var(--navy);
                padding: 1rem 2rem;
                border-radius: 8px;
                box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                z-index: 3000;
                animation: slideIn 0.3s ease;
            `;
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 2000);
        }

        // Razorpay Payment Integration with Server Verification
        async function initiatePayment() {
            if (cart.length === 0) {
                showNotification('Your cart is empty!');
                return;
            }

            const total = cart.reduce((sum, item) => sum + item.price, 0);
            
            try {
                showNotification('Creating order...');
                
                // Step 1: Create order on server
                const orderResponse = await fetch('/api/create-order', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        amount: total,
                        currency: 'INR' // Change to USD if needed
                    })
                });

                const orderData = await orderResponse.json();
                
                if (!orderData.success) {
                    throw new Error('Failed to create order');
                }

                // Step 2: Open Razorpay checkout
                const options = {
                    key: RAZORPAY_KEY, // Your Razorpay Key ID (public key, safe to expose)
                    amount: orderData.amount,
                    currency: orderData.currency,
                    order_id: orderData.order_id,
                    name: "Crystal Haven",
                    description: "Purchase of healing crystals",
                    image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='80' font-size='80'%3E‚ú®%3C/text%3E%3C/svg%3E",
                    handler: async function (response) {
                        // Step 3: Verify payment on server
                        await handlePaymentSuccess(response);
                    },
                    prefill: {
                        name: "",
                        email: "",
                        contact: ""
                    },
                    notes: {
                        items: cart.map(item => item.name).join(', ')
                    },
                    theme: {
                        color: "#C8D5B9"
                    },
                    modal: {
                        ondismiss: function() {
                            showNotification('Payment cancelled');
                        }
                    }
                };

                const razorpay = new Razorpay(options);
                razorpay.open();

            } catch (error) {
                console.error('Payment initiation error:', error);
                showNotification('Error creating order. Please try again.');
            }
        }

        async function handlePaymentSuccess(response) {
            try {
                showNotification('Verifying payment...');
                
                // Verify payment signature on server
                const verifyResponse = await fetch('/api/verify-payment', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        razorpay_order_id: response.razorpay_order_id,
                        razorpay_payment_id: response.razorpay_payment_id,
                        razorpay_signature: response.razorpay_signature
                    })
                });

                const verifyData = await verifyResponse.json();

                if (verifyData.success) {
                    // Payment verified successfully
                    showNotification('Payment Successful! üéâ');
                    
                    // Clear cart after successful payment
                    setTimeout(() => {
                        cart = [];
                        updateCartCount();
                        closeCart();
                        showNotification('Thank you for your purchase!');
                    }, 1500);
                } else {
                    showNotification('Payment verification failed!');
                }

            } catch (error) {
                console.error('Verification error:', error);
                showNotification('Error verifying payment');
            }
        }

        loadProducts();
    </script>
</body>
</html>
